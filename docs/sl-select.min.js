"use strict";const AppySelectStore={};let AppyMultiIndex=0;const selectFactoryAdd=(l,e)=>{let c=e.options;const t=e.onChange;e=e.defaultLabel;c.length||(c=[{value:" ",label:" "}]);const r=e=>{var t=e.innerText;-1===AppySelectStore[i].indexOf(t)&&AppySelectStore[i].push(t),e.classList.add("selected")},a=e=>{var t=e.innerText,t=AppySelectStore[i].indexOf(t);-1<t&&AppySelectStore[i].splice(t,1),e.classList.remove("selected")},n=(t,e)=>{o.querySelectorAll("li").forEach(e=>{"selectAll"!==e.id&&(t?r:a)(e)}),d(e)},d=e=>{var t=AppySelectStore[i];p.querySelector("i").innerText=t.length||"";const n=o.querySelector("#selectAll");c.length===t.length?(n.classList.add("selected"),o.value=void 0):(n.classList.remove("selected"),o.value=t),e||o.dispatchEvent(new window.Event("change",{bubbles:!0}))},s=e=>{const t=document.createElement("li");return t.innerText=e,t.setAttribute("data-value",e),t.addEventListener("click",e=>{var t,n;e.stopPropagation(),l?(t=e.target,n=t.innerText,(-1==AppySelectStore[i].indexOf(n)?r:a)(t),d()):(e=>{e=(e=e||S.querySelector("li")).innerText;AppySelectStore[i].includes(e)?AppySelectStore[i]=void 0:AppySelectStore[i]=e,o.classList.remove("opened");e=AppySelectStore[i];0<e.length?(o.value=e,p.innerText=e):(o.value="",p.innerText=c[0].label),o.dispatchEvent(new window.Event("change",{bubbles:!0}))})(e.target)}),t};AppySelectStore[AppyMultiIndex]=[];const i=AppyMultiIndex,o=document.createElement("div");o.classList.add("multi"),o.setAttribute("key",i);const p=document.createElement("div");p.classList.add("multi__inner"),p.innerHTML=l?`<span>${e}<i></i></span>`:c[0].label;const u=document.createElement("button");o.appendChild(u),u.appendChild(p);const S=document.createElement("div");S.classList.add("multi__dropdown");const v=document.createElement("ul");return l&&v.appendChild((()=>{const e=document.createElement("li");return e.innerText="Select All",e.id="selectAll",e.addEventListener("click",e=>{e.stopPropagation();e=e.target.classList.contains("selected");n(!e)}),e})()),c.forEach(e=>{v.appendChild(s(e.label))}),o.addEventListener("click",e=>{e.stopPropagation(),o.classList.toggle("opened")}),t&&o.addEventListener("change",e=>{t(o.value)}),o.appendChild(S),S.appendChild(v),l&&n(!0,!0),AppyMultiIndex++,o};document.addEventListener("click",e=>{document.querySelectorAll(".multi").forEach(e=>{e.classList.remove("opened")})}),parent&&parent.document.addEventListener("click",function(e){document.querySelectorAll(".multi").forEach(e=>{e.classList.remove("opened")})}),window.selectFactory={createMulti(e){return selectFactoryAdd(!0,e)},createSingle(e){return selectFactoryAdd(!1,e)},create(e,t){return selectFactoryAdd(e,t)}};