"use strict";const AppySelectStore={};let AppyMultiIndex=0;const selectFactoryAdd=(n,e)=>{const c=e.options,t=e.onChange;var l=e.defaultLabel;e.defaultValue;c.length||(c=[{value:"",label:""}]);const r=e=>{var t=e.innerText;-1===AppySelectStore[o].indexOf(t)&&AppySelectStore[o].push(t),e.classList.add("selected")},a=e=>{var t=e.innerText,t=AppySelectStore[o].indexOf(t);-1<t&&AppySelectStore[o].splice(t,1),e.classList.remove("selected")},d=(t,e)=>{p.querySelectorAll("li").forEach(e=>{"selectAll"!==e.id&&(t?r:a)(e)}),s(e)},s=e=>{var t=AppySelectStore[o];u.querySelector("i").innerText=t.length||"";const l=p.querySelector("#selectAll");c.length===t.length?(l.classList.add("selected"),p.value=void 0):(l.classList.remove("selected"),p.value=t),e||p.dispatchEvent(new window.Event("change",{bubbles:!0}))},i=e=>{const t=document.createElement("li");return t.innerText=e,t.setAttribute("data-value",e),t.addEventListener("click",e=>{var t,l;e.stopPropagation(),n?(t=e.target,l=t.innerText,(-1==AppySelectStore[o].indexOf(l)?r:a)(t),s()):(e=>{e=(e=e||S.querySelector("li")).innerText;AppySelectStore[o].includes(e)?AppySelectStore[o]=void 0:AppySelectStore[o]=e,p.classList.remove("opened");e=AppySelectStore[o];0<e.length?(p.value=e,u.innerText=e):(p.value="",u.innerText=c[0].label),p.dispatchEvent(new window.Event("change",{bubbles:!0}))})(e.target)}),t};AppySelectStore[AppyMultiIndex]=[];const o=AppyMultiIndex,p=document.createElement("div");p.classList.add("multi"),p.setAttribute("key",o);const u=document.createElement("div");u.classList.add("multi__inner"),u.innerHTML=n?`<span>${l}<i></i></span>`:c[0].label;const v=document.createElement("button");p.appendChild(v),v.appendChild(u);const S=document.createElement("div");S.classList.add("multi__dropdown");const A=document.createElement("ul");return n&&A.appendChild((()=>{const e=document.createElement("li");return e.innerText="Select All",e.id="selectAll",e.addEventListener("click",e=>{e.stopPropagation();e=e.target.classList.contains("selected");d(!e)}),e})()),c.forEach(e=>{A.appendChild(i(e.label))}),p.addEventListener("click",e=>{e.stopPropagation(),p.classList.toggle("opened")}),t&&p.addEventListener("change",e=>{t(p.value)}),p.appendChild(S),S.appendChild(A),n&&d(!0,!0),AppyMultiIndex++,p};document.addEventListener("click",e=>{document.querySelectorAll(".multi").forEach(e=>{e.classList.remove("opened")})}),parent&&parent.document.addEventListener("click",function(e){document.querySelectorAll(".multi").forEach(e=>{e.classList.remove("opened")})}),window.selectFactory={createMulti(e){return selectFactoryAdd(!0,e)},createSingle(e){return selectFactoryAdd(!1,e)},create(e,t){return selectFactoryAdd(e,t)}};