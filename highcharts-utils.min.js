"use strict";const AppySelectStore={};let AppyMultiIndex=0;const selectFactoryAdd=(i,e)=>{let l=e.options;const t=e.onChange;e=e.defaultLabel;l.length||(l=[{value:" ",label:" "}]);const r=e=>{var t=e.innerText;-1===AppySelectStore[a].indexOf(t)&&AppySelectStore[a].push(t),e.classList.add("selected")},s=e=>{var t=e.innerText,t=AppySelectStore[a].indexOf(t);-1<t&&AppySelectStore[a].splice(t,1),e.classList.remove("selected")},n=(t,e)=>{d.querySelectorAll("li").forEach(e=>{"selectAll"!==e.id&&(t?r:s)(e)}),o(e)},o=e=>{var t=AppySelectStore[a];p.querySelector("i").innerText=t.length||"";const n=d.querySelector("#selectAll");l.length===t.length?(n.classList.add("selected"),d.value=void 0):(n.classList.remove("selected"),d.value=t),e||d.dispatchEvent(new window.Event("change",{bubbles:!0}))},c=e=>{const t=document.createElement("li");return t.innerText=e,t.setAttribute("data-value",e),t.addEventListener("click",e=>{var t,n;e.stopPropagation(),i?(t=e.target,n=t.innerText,(-1==AppySelectStore[a].indexOf(n)?r:s)(t),o()):(e=>{e=(e=e||v.querySelector("li")).innerText;AppySelectStore[a].includes(e)?AppySelectStore[a]=void 0:AppySelectStore[a]=e,d.classList.remove("opened");e=AppySelectStore[a];0<e.length?(d.value=e,p.innerText=e):(d.value="",p.innerText=l[0].label),d.dispatchEvent(new window.Event("change",{bubbles:!0}))})(e.target)}),t};AppySelectStore[AppyMultiIndex]=[];const a=AppyMultiIndex,d=document.createElement("div");d.classList.add("multi"),d.setAttribute("key",a);const p=document.createElement("div");p.classList.add("multi__inner"),p.innerHTML=i?`<span>${e}<i></i></span>`:l[0].label;const u=document.createElement("button");d.appendChild(u),u.appendChild(p);const v=document.createElement("div");v.classList.add("multi__dropdown");const y=document.createElement("ul");return i&&y.appendChild((()=>{const e=document.createElement("li");return e.innerText="Select All",e.id="selectAll",e.addEventListener("click",e=>{e.stopPropagation();e=e.target.classList.contains("selected");n(!e)}),e})()),l.forEach(e=>{y.appendChild(c(e.label))}),d.addEventListener("click",e=>{e.stopPropagation(),d.classList.toggle("opened")}),t&&d.addEventListener("change",e=>{t(d.value)}),d.appendChild(v),v.appendChild(y),i&&n(!0,!0),AppyMultiIndex++,d};function onLegendItemClick(e){e.preventDefault();var t,n=this.chart.series,l=!0,r=0;for(i=0;i<n.length;i++)n[i].visible?(r++,t=n[i]):l=!1;if(l)for(i=0;i<n.length;i++)this!=n[i]&&n[i].setVisible(!1);else if(1==r&&this==t)for(i=0;i<n.length;i++)n[i].setVisible(!0);else this.setVisible(!this.visible);return!1}document.addEventListener("click",e=>{document.querySelectorAll(".multi").forEach(e=>{e.classList.remove("opened")})}),parent&&parent.document.addEventListener("click",function(e){document.querySelectorAll(".multi").forEach(e=>{e.classList.remove("opened")})}),window.selectFactory={createMulti(e){return selectFactoryAdd(!0,e)},createSingle(e){return selectFactoryAdd(!1,e)},create(e,t){return selectFactoryAdd(e,t)}},function(e){e.wrap(e.Chart.prototype,"init",function(e){e.apply(this,Array.prototype.slice.call(arguments,1));e=this;!e.legend.options.reverseClick||(e.options.plotOptions.series||(e.options.plotOptions.series={}),e.options.plotOptions.series.events||(e.options.plotOptions.series.events={}),e.update({plotOptions:{series:{events:{legendItemClick:onLegendItemClick}}}}))})}(Highcharts);const MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],toNumber=e=>parseFloat(e),uniqueFilter=(e,t,n)=>n.indexOf(e)===t,fixFloat=e=>Number.parseFloat(e.toFixed(2)),reduceToSum=(e,t)=>e+t;function average(){return Array.from(arguments).reduce(reduceToSum,0)/arguments.length||0}const sortByPeriod=(e,t)=>{var n=e=>{var[t,e]=e.split(" ");return{month:t,year:parseInt(e)}},e=n(e),t=n(t);return e.year!==t.year?e.year-t.year:MONTHS.indexOf(e.month)-MONTHS.indexOf(t.month)},sortByParam=(e,t,n)=>t[e]>n[e]?1:-1,Utils={toNumber:toNumber,uniqueFilter:uniqueFilter,fixFloat:fixFloat,sortByPeriod:sortByPeriod,average:average};